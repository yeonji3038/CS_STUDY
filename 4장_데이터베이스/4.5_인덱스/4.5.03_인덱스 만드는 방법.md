# 📘 4.5.3 인덱스 만드는 방법

인덱스를 만드는 방법은 데이터베이스마다 다르며,  
여기서는 **MySQL**과 **MongoDB**를 기준으로 설명합니다.

---

## 📌 MySQL

MySQL에는 크게 **클러스터형 인덱스**와 **세컨더리 인덱스**가 있습니다.  

- **클러스터형 인덱스**
  - 테이블당 **하나만** 설정 가능
  - `PRIMARY KEY` 옵션으로 기본키를 만들면 자동 생성
  - 기본키가 없을 경우 `UNIQUE NOT NULL` 옵션으로도 생성 가능
  - 데이터 자체가 인덱스 순서에 맞게 정렬되어 저장됨 → 조회 시 빠름

- **세컨더리 인덱스**
  - `CREATE INDEX` 명령어로 추가 생성
  - 여러 개 생성 가능
  - 데이터는 원본에 그대로 있고, 인덱스에는 해당 키와 원본 데이터의 위치(pointer)만 저장됨
  - 조회할 때 인덱스 → 원본 데이터를 다시 읽는 단계 필요 (Table Access by Index RowID)

📍 **세컨더리 인덱스 만들기**

```sql
CREATE INDEX 인덱스명 ON 테이블명(컬럼명);
```

📍 **활용 예시**
- `age`처럼 단일 컬럼 검색만 한다면 클러스터형 인덱스로 충분  
- 하지만 `age, name, email` 같이 **여러 필드 조합**으로 자주 조회한다면 **세컨더리 인덱스** 설정이 유리  

---

## 📌 MongoDB

- MongoDB는 도큐먼트 생성 시 `_id` 필드가 자동으로 추가되며, 이는 **ObjectId** 형태의 기본키 역할을 수행  
- `_id` 필드는 모든 도큐먼트에서 **자동 인덱스**가 생성됨

📍 **추가 인덱스**
- `createIndex()`를 통해 단일/복합 인덱스를 지정할 수 있음
- 기본키 + 세컨더리 키를 함께 활용하는 **복합 인덱스(Composite Index)** 지원

```javascript
db.collection.createIndex({ 필드명1: 1, 필드명2: -1 })
```

- `1` → 오름차순 인덱스  
- `-1` → 내림차순 인덱스  

📍 **MongoDB 지원 인덱스 유형**
- 단일 인덱스
- 복합 인덱스
- 텍스트 인덱스 (검색 최적화)
- 해시 인덱스
- 지리공간 인덱스 (2D, 3D 좌표 기반)

---

## ✅ 요약

| 구분 | 설명 | 특징 |
|------|------|------|
| **MySQL 클러스터형 인덱스** | PRIMARY KEY, UNIQUE NOT NULL 시 자동 생성 | 테이블당 1개, 데이터 정렬 저장 |
| **MySQL 세컨더리 인덱스** | CREATE INDEX로 생성 | 여러 개 가능, 인덱스 → 원본 데이터 접근 필요 |
| **MongoDB 기본 인덱스** | `_id` 필드 자동 인덱스 | 모든 도큐먼트에서 제공 |
| **MongoDB 세컨더리 인덱스** | createIndex()로 추가 생성 | 복합·텍스트·지리공간 인덱스 지원 |