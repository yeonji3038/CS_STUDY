# 2계층 아키텍처 보안 그룹 패턴 요약

## 아키텍처 구성

-   **웹 계층 (Public Subnet EC2)**: 외부 사용자와 직접 통신 (HTTPS)
-   **DB 계층 (Private Subnet EC2)**: 웹 서버와만 통신 (SQL Server, 포트
    1433)

------------------------------------------------------------------------

## 보안 그룹 설계 패턴

### 1. 웹 계층 보안 그룹 (Web SG)

-   **인바운드 규칙**
    -   `0.0.0.0/0` → 포트 **443** 허용 (HTTPS)
-   **아웃바운드 규칙**
    -   기본값: All Allow (추가 설정 필요 없음)

### 2. DB 계층 보안 그룹 (DB SG)

-   **인바운드 규칙**
    -   웹 계층 보안 그룹(Web SG) → 포트 **1433** 허용
-   **아웃바운드 규칙**
    -   기본값: All Allow (필수는 아님)

------------------------------------------------------------------------

## 잘못된 설정 예시

-   DB 계층에 `0.0.0.0/0` 열기 ❌ (보안 위험)
-   웹 계층에서 DB 계층으로 443 허용 ❌ (불필요)
-   DB 계층에서 웹 계층으로 아웃바운드 트래픽 허용 ❌ (역할 아님)

------------------------------------------------------------------------

## 핵심 개념

1.  **최소 권한 원칙 (Least Privilege)**
    -   꼭 필요한 포트만, 꼭 필요한 SG 간에만 허용.
2.  **웹 계층**
    -   외부 접근 허용 (443/HTTPS).
3.  **DB 계층**
    -   외부 접근 차단.
    -   웹 계층에서 오는 포트 1433만 허용.

------------------------------------------------------------------------

## 시험 정답 패턴

-   ✅ 웹 서버: `0.0.0.0/0` → 443 인바운드 허용
-   ✅ DB 서버: 웹 SG에서 오는 1433 인바운드 허용

즉, 정답 조합은 **A + C**
