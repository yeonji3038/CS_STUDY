# AWS Gateway Load Balancer (GWLB)

## 1. 개요
- **Gateway Load Balancer (GWLB)**는 AWS에서 **네트워크 보안 어플라이언스**를 손쉽게 배포·확장·관리할 수 있도록 돕는 서비스
- L3/L4 계층에서 동작하여 **IP 패킷 단위**로 트래픽을 처리
- AWS Marketplace에서 제공하는 **방화벽, IDS/IPS, 침입 방지 시스템**과 연동 가능
- 모든 트래픽을 **투명하게 검사**한 뒤 원래 목적지로 전달

---

## 2. 주요 특징
1. **투명 프록시 기능**
   - GWLB는 트래픽을 검사 어플라이언스로 전달하지만, 클라이언트/서버 입장에서는 "중간 장비가 있는지 모르게" 동작
   - IP 변경 없음 → 애플리케이션 수정 불필요

2. **확장성과 가용성**
   - GWLB는 **Auto Scaling**과 통합되어 보안 어플라이언스를 자동으로 확장
   - 다중 AZ 배포 지원

3. **중앙 집중식 보안**
   - 여러 VPC에서 오는 트래픽을 **중앙 보안 VPC**의 어플라이언스로 집약
   - 보안 정책을 한곳에서 관리 가능

4. **VPC 엔드포인트와 통합**
   - GWLB Endpoint(GWLBe)를 사용하여 VPC 내부 트래픽을 GWLB로 보냄
   - 모든 패킷이 반드시 어플라이언스를 통과하도록 강제 가능

---

## 3. 동작 방식
1. 클라이언트 → VPC로 트래픽 전송
2. GWLBe가 트래픽을 받아 GWLB로 전달
3. GWLB가 트래픽을 등록된 보안 어플라이언스로 전달
4. 보안 어플라이언스에서 검사 수행
5. 검사 완료 후 트래픽을 다시 GWLB로 반환 → 원래 목적지로 전달

---

## 4. 주요 사용 사례
- **방화벽 서비스**: 모든 인바운드/아웃바운드 트래픽을 검사
- **침입 탐지 및 방지(IDS/IPS)**: 악성 트래픽 차단
- **규제 준수 환경**: 모든 네트워크 트래픽을 반드시 보안 장비를 거치도록 강제
- **멀티 계정 보안 관리**: 중앙 보안 VPC를 구축해 여러 계정의 트래픽 검사

---

## 5. 장점과 단점
### 장점
- 투명한 트래픽 검사 (애플리케이션 수정 불필요)
- 자동 확장 및 고가용성 지원
- 중앙 집중식 보안 아키텍처 가능

### 단점
- L3/L4 계층까지만 동작 (애플리케이션 계층 필터링 불가)
- 네트워크 복잡성 증가
- 추가 비용 발생

---

## 6. 다른 Load Balancer와 비교

| 구분 | ALB | NLB | GWLB |
|------|-----|-----|------|
| **계층** | L7 (HTTP/HTTPS) | L4 (TCP/UDP) | L3/L4 (IP 패킷) |
| **주요 목적** | 웹/애플리케이션 라우팅 | 초고성능 네트워크 트래픽 | 보안 어플라이언스 통합 |
| **대표 기능** | URL/Host 기반 라우팅 | 고정 IP, 초저지연 처리 | 트래픽 검사 및 필터링 |
| **사용 사례** | 웹앱, API, 마이크로서비스 | 게임, 금융, IoT | 방화벽, IDS/IPS, 규제 준수 |

---

## 7. 정리
- GWLB는 **보안 어플라이언스 전용 로드밸런서**  
- 모든 네트워크 트래픽을 **투명하게 검사** 후 전달  
- VPC 간 또는 멀티 계정 환경에서 **중앙 보안 허브** 구축에 적합  
- "보안 트래픽 강제 검사"가 필요할 때 사용하는 것이 핵심


ALB = L7, 애플리케이션 라우팅

NLB = L4, 초고성능/저지연 처리

GWLB = L3/L4, 보안 어플라이언스 통합